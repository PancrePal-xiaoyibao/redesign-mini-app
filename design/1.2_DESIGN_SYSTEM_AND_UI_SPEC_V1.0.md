# 病情主动管理科普助手
## 设计系统 & UI 规范 V1.0（完整版）

*从 PRD 到开发交付的设计指南*

---

## 1. 文档说明

### 1.1 文档定位
本文档是 **PRD（产品需求文档）** 与 **开发实现** 之间的桥梁，提供：
- 完整的视觉设计规范（色彩、字体、间距、圆角等）
- UI 组件库定义
- Logo 和品牌规范
- 布局和页面级设计指南
- BBS（轻社交）功能详细设计
- 信源等级的视觉表现
- 响应式设计规范

### 1.2 受众
- 设计师：用于 Figma 设计稿输出
- 前端开发：用于组件开发和样式实现
- 产品经理：验证 PRD 与设计的一致性
- QA 测试：验收标准

### 1.3 版本历史
| 版本 | 时间 | 更新内容 |
|------|------|--------|
| v1.0 | 2025-12-25 | 首发版本，包含完整设计系统、BBS 功能、信源等级视觉规范 |

---

## 2. 品牌与 Logo 规范

### 2.1 产品名称与域名
- **产品名称**：病情主动管理科普助手
- **小程序名称**：Pancrepal（音：胰腺助手）/ 肿瘤科普助手
- **英文全称**：Cancer Care & Knowledge Assistant
- **域名**：pancrepal.health（示例）
- **小程序 ID**：gh_xxxxxxxxxxxxxxxx（待申请）

### 2.2 Logo 设计规范

#### 主 Logo
```
[Logo 说明 - 基于 UI 稿中的角色设计]
• 名称：「小绿芽」（吉祥物+品牌角色）
• 形状：圆形，绿色系，卡通医疗象征
• 用途：App 图标、页面装饰、品牌认知
• 颜色：主绿色 #2ECC71（RGB: 46, 204, 113）
• 清晰度：支持 192px × 192px 及以上
• 文件格式：PNG（透明背景）、SVG（矢量）
```

#### Logo 使用规则
- **最小尺寸**：32px × 32px（不低于此尺寸显示）
- **安全区**：Logo 四周留白 ≥ Logo 尺寸的 20%
- **禁用**：不允许拉伸、扭曲、改色（除白底/深色背景模式）
- **黑白版本**：用于印刷、无色显示场景

#### Logo 放置位置
| 场景 | 位置 | 尺寸 |
|------|------|------|
| 小程序页面顶部导航 | 左上角 | 32px × 32px |
| 首页 Banner | 居中 | 80px × 80px |
| 文章封面水印 | 右下角 | 48px × 48px（30% 透明度） |
| 社区帖子头像 | 用户头像内 | 16px × 16px |
| 分享卡片 | 右上角 | 24px × 24px |

### 2.3 品牌色彩体系

#### 核心色彩板
```
主色（Primary Green）：#2ECC71
  - RGB: 46, 204, 113
  - HSL: 145°, 62%, 49%
  - 用途：按钮、链接、重要强调

次色（Light Green）：#A8E6C1
  - RGB: 168, 230, 193
  - HSL: 145°, 63%, 78%
  - 用途：背景、卡片边框、浅色块

深绿色（Dark Green）：#27AE60
  - RGB: 39, 174, 96
  - HSL: 145°, 63%, 42%
  - 用途：悬停态、激活态、深色模式主色

中性色
  - 白色背景：#FFFFFF
  - 浅灰背景：#F5F7FA
  - 中灰文字：#666666
  - 深灰文字：#333333
  - 边框浅灰：#E8EAED
  - 边框中灰：#D0D0D0

语义色
  - 成功（绿）：#2ECC71
  - 警告（黄）：#F39C12 (RGB: 243, 156, 18)
  - 错误（红）：#E74C3C (RGB: 231, 76, 60)
  - 信息（蓝）：#3498DB (RGB: 52, 152, 219)
  - 禁用（浅灰）：#BDBDBD (RGB: 189, 189, 189)
```

#### 信源等级颜色标签
```
A 级 - 权威指南
  - 背景色：#E8F5E9（浅绿）
  - 文字色：#1B5E20（深绿）
  - 边框色：#4CAF50
  - 标签文字：「A」或「权威指南」
  
B 级 - 专家署名
  - 背景色：#FFF3E0（浅橙）
  - 文字色：#E65100（深橙）
  - 边框色：#FF9800
  - 标签文字：「B」或「专家署名」
  
C 级 - 平台自产
  - 背景色：#E3F2FD（浅蓝）
  - 文字色：#01579B（深蓝）
  - 边框色：#2196F3
  - 标签文字：「C」或「平台自产」
```

---

## 3. 字体与排版规范

### 3.1 字体选择

#### 中文字体
| 用途 | 字体 | 字重 | 推荐场景 |
|------|------|------|--------|
| 标题（H1） | 微软雅黑 / 苹方 | Bold (700) | 页面标题、大标题 |
| 标题（H2） | 微软雅黑 / 苹方 | Bold (700) | 模块标题 |
| 标题（H3） | 微软雅黑 / 苹方 | SemiBold (600) | 小标题、卡片标题 |
| 正文 | 微软雅黑 / 苹方 | Regular (400) | 文章内容、描述文字 |
| 标签/按钮 | 微软雅黑 / 苹方 | Medium (500) | 按钮、标签、标注 |

#### 英文字体（备用）
- 标题：Segoe UI, Helvetica Neue, Arial
- 正文：Segoe UI, Roboto, Open Sans
- 代码：Courier New, Monaco, Consolas

#### 字体 Fallback 链
```css
font-family: "PingFang SC", "Microsoft YaHei", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
```

### 3.2 字体大小与行高

#### 排版标度（8px 基准）

| 级别 | 大小 | 行高 | 字重 | 用途 |
|------|------|------|------|------|
| H1 | 28px | 36px (1.29) | 700 | 页面标题 |
| H2 | 24px | 32px (1.33) | 700 | 模块标题 |
| H3 | 20px | 28px (1.4) | 600 | 卡片标题 |
| H4 | 18px | 26px (1.44) | 600 | 小标题 |
| H5 | 16px | 24px (1.5) | 600 | 强调文本 |
| Body L | 16px | 24px (1.5) | 400 | 正文（大） |
| Body M | 14px | 22px (1.57) | 400 | 正文（标准） |
| Body S | 13px | 20px (1.54) | 400 | 正文（小） |
| Caption | 12px | 18px (1.5) | 400 | 辅助文本 |
| Label | 12px | 16px (1.33) | 500 | 标签、按钮 |

### 3.3 文字色彩与对比度

#### WCAG AAA 标准（无障碍）
- **大文字**（≥18px 或 ≥14px bold）：对比度 ≥ 4.5:1
- **小文字**（<18px）：对比度 ≥ 7:1
- **禁用态**：对比度 ≥ 3:1

#### 推荐配色组合
| 背景 | 文字 | 对比度 | 合规性 |
|------|------|-------|-------|
| 白色 (#FFFFFF) | 深灰 (#333333) | 11.5:1 | AAA |
| 白色 (#FFFFFF) | 中灰 (#666666) | 5.6:1 | AAA |
| 浅灰 (#F5F7FA) | 深灰 (#333333) | 10.2:1 | AAA |
| 主绿 (#2ECC71) | 白色 (#FFFFFF) | 4.8:1 | AAA |
| 浅绿 (#A8E6C1) | 深绿 (#27AE60) | 8.5:1 | AAA |

---

## 4. 间距与布局规范

### 4.1 间距标度（8px 基准）

```
基础单位：8px

间距标度：
8px   - 最小间距（元素间）
16px  - 小间距（相关元素之间）
24px  - 标准间距（不同区域之间）
32px  - 大间距（模块间距）
48px  - 超大间距（页面主要分割）

边距规则（以手机屏宽 375px 为基准）：
• 页面左右内边距：16px
• 卡片左右内边距：16px
• 卡片上下内边距：16px
• 列表项上下间距：12px
```

### 4.2 响应式布局

#### 屏幕尺寸断点
```
Mobile（默认）：320px - 479px
Mobile L：480px - 767px
Tablet：768px - 1023px
Desktop：≥1024px
```

#### 小程序适配（主要目标）
```
iPhone SE：375px（设计基准）
iPhone 11：390px
iPhone 12 Pro Max：428px
Android：不同厂商差异大，设计时预留左右边距防止安全区问题
```

### 4.3 网格系统

```
• 基准网格：8px × 8px
• 页面宽度：375px（减去左右 16px 内边距 = 343px）
• 列数：2 列或 3 列布局
• 列宽：(343 - 间距) / 列数
• 示例（2 列）：
  列宽 = (343 - 12) / 2 = 165.5px ≈ 160px（考虑实际像素）
```

---

## 5. 圆角与阴影规范

### 5.1 圆角规则

```
微圆角：4px
  用途：小按钮、标签、输入框

小圆角：8px
  用途：普通按钮、卡片

中圆角：12px
  用途：较大卡片、对话框

大圆角：16px
  用途：模块卡片、突出组件

超大圆角：24px
  用途：全圆角（如头像）或特殊强调

全圆形：50% (border-radius: 50%)
  用途：头像、勋章、圆形图标
```

### 5.2 阴影规范

```
无阴影：用于卡片背景或扁平设计

浅阴影（Subtle）：
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  用途：卡片、输入框、下拉菜单

中阴影（Medium）：
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
  用途：悬浮卡片、模态窗口底部

深阴影（Elevation）：
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  用途：模态框、浮动按钮、顶部导航

高阴影（Floating）：
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
  用途：重点内容、弹窗、提示
```

---

## 6. UI 组件库规范

### 6.1 按钮组件

#### 按钮类型

**Primary Button（主按钮）**
```
状态：
• 默认：背景 #2ECC71，文字 白色，圆角 8px
• 悬停：背景 #27AE60，文字 白色（深色）
• 激活：背景 #1E8449，文字 白色
• 禁用：背景 #BDBDBD，文字 #757575，cursor: not-allowed

尺寸：
• Large：44px 高，字体 16px bold，左右内边距 32px
• Medium：40px 高，字体 14px bold，左右内边距 24px
• Small：32px 高，字体 12px bold，左右内边距 16px
• 宽度：仅 Large 支持 100%（自适应）；Medium/Small 固定宽度
```

**Secondary Button（次按钮）**
```
• 背景：#F5F7FA，文字：#2ECC71，边框：1px #2ECC71
• 悬停：背景 #E8F5E9，文字 #27AE60，边框 #27AE60
• 禁用：背景 #EEEEEE，文字 #BDBDBD，边框 #D0D0D0
• 圆角：8px
```

**Text Button（文字按钮）**
```
• 背景：透明，文字：#2ECC71
• 悬停：背景 rgba(46, 204, 113, 0.1)，文字 #27AE60
• 无边框，无阴影
• 圆角：0px
```

**Button 组合示例**
```
[确认] [取消]
• 主要动作：Primary 按钮（绿色）
• 次要动作：Secondary 按钮（灰色边框）或 Text 按钮
• 间距：8px
```

### 6.2 输入框组件

```
输入框（Input）：
• 边框：1px #E8EAED
• 背景：#FFFFFF
• 高度：40px
• 内边距：8px（上下）× 12px（左右）
• 字体：14px，颜色 #333333
• Placeholder：14px，颜色 #999999
• 圆角：8px
• Focus 态：边框 2px #2ECC71，背景 #F5F7FA
• 禁用态：背景 #EEEEEE，边框 #D0D0D0，文字 #BDBDBD

文本域（Textarea）：
• 最小高度：80px
• 允许用户拖拽调整（resize: vertical）
• 其他规则同 Input
```

### 6.3 卡片组件

```
标准卡片（Card）：
• 背景：#FFFFFF
• 边框：1px #E8EAED（可选）
• 圆角：12px
• 内边距：16px
• 阴影：浅阴影
• 间距：相邻卡片 16px

文章卡片（ArticleCard）：
• 布局：横排（图片 + 文字）
• 图片：宽 80px，高 80px，圆角 8px
• 标题：16px bold，最多 2 行
• 摘要：13px，文字 #666666，最多 1 行
• 底部：作者 + 日期（12px，#999999）
• 信源标签：A/B/C 标记（右上角）

游戏关卡卡片（GameCard）：
• 标题：16px bold
• 难度星级：5 颗星显示（1-5 级）
• 进度条：圆角 4px，背景 #E8EAED，填充 #2ECC71
• 状态：已解锁、已完成、锁定
• 冷却倒计时：红色警告文字

社区帖子卡片（PostCard）：
• 头部：用户头像（32px）+ 昵称 + 发布时间
• 内容：最多 3 行，超出省略号
• 底部：评论数 + 分享数 + 赞数（12px 图标 + 文字）
• 审核标记：「待审核」/「已发布」/「已拒绝」
```

### 6.4 标签组件（Tags）

```
标签（Tag）：
• 背景：#F5F7FA
• 文字：#333333，12px
• 圆角：16px（全圆角）
• 内边距：6px × 12px（竖 × 横）
• 边框：0px（除特殊标记）

信源等级标签：
• A 级：绿色背景 #E8F5E9，绿色文字 #1B5E20
• B 级：橙色背景 #FFF3E0，橙色文字 #E65100
• C 级：蓝色背景 #E3F2FD，蓝色文字 #01579B
• 圆角：4px（不是全圆角）
• 字体：Bold 12px

勋章标签（Badge）：
• 背景：#FFC107（金色），或 #4CAF50（绿色）
• 文字：白色，Bold 12px
• 圆角：50%（正圆形）
• 尺寸：24px × 24px（小）或 32px × 32px（中）
```

### 6.5 模态框（Modal）

```
模态框（Modal）：
• 背景覆盖：rgba(0, 0, 0, 0.5)
• 框体背景：#FFFFFF
• 框体最大宽度：343px（375px - 16px × 2）
• 圆角：16px
• 内边距：24px
• 深阴影
• 顶部关闭按钮（×）：右上角，32px × 32px

弹窗标题：
• 字体：20px bold
• 颜色：#333333
• 底部间距：16px

弹窗内容：
• 字体：14px，颜色 #666666
• 行高：22px
• 底部间距：24px

弹窗底部按钮：
• 2 按钮布局：[取消] [确认]，各占 50% - 8px 间距
• 1 按钮布局：[确认]，占 100%
```

### 6.6 列表与菜单

```
列表项（ListItem）：
• 高度：56px（含上下内边距）
• 左侧内边距：16px
• 右侧内边距：16px
• 上下内边距：12px
• 边界：下 1px #E8EAED 分割线
• 字体：14px，#333333

下拉菜单（Dropdown）：
• 背景：#FFFFFF
• 边框：1px #E8EAED
• 圆角：8px
• 项高：40px
• 项内边距：12px
• 悬停态：背景 #F5F7FA
• 阴影：中阴影
```

### 6.7 加载与骨架屏

```
加载动画（Loading）：
• 类型：旋转加载、脉冲加载、进度条
• 主色：#2ECC71
• 大小：40px × 40px

进度条（Progress Bar）：
• 高度：4px
• 背景：#E8EAED
• 填充色：#2ECC71
• 圆角：2px

骨架屏（Skeleton）：
• 背景色：#EEEEEE
• 动画：脉冲效果，不透明度 0.5 - 1.0
• 用于：卡片加载、文章加载、列表加载
```

---

## 7. 页面级设计规范

### 7.1 首页（Home）

#### 布局结构
```
┌─────────────────────────────┐
│  顶部导航栏（固定）           │  高 56px
├─────────────────────────────┤
│  欢迎 Banner                │  高 120px
│  「早筛阶段」               │
├─────────────────────────────┤
│  Roadmap 时间轴            │  可滚动
│  ├─ 早筛 ●                 │
│  ├─ 确诊 ●                 │
│  ├─ 治疗 ○ (当前)          │
│  └─ 康复 ○                 │
├─────────────────────────────┤
│  快捷导航（水平滚动）        │  高 80px
│  ├─ 文章                   │
│  ├─ 游戏                   │
│  ├─ AI 助手                │
│  └─ ...                    │
├─────────────────────────────┤
│  推荐内容（卡片列表）        │
├─────────────────────────────┤
│  底部导航栏（固定）          │  高 56px
└─────────────────────────────┘
```

#### 顶部导航栏
```
左：Logo（32px × 32px） + 应用名称
中：空白
右：通知图标（24px） + 用户头像（32px）

分隔线：下方 1px #E8EAED
背景：#FFFFFF
高度：56px（含分隔线）
```

#### 欢迎 Banner
```
背景：渐变 #2ECC71 → #A8E6C1
内容：
• 标题：「早筛阶段」（28px bold）
• 副标题：「了解风险信号」（14px，#FFFFFF）
• 小绿芽吉祥物：右下角，80px × 80px
圆角：12px
内边距：24px
```

#### Roadmap 时间轴
```
水平滚动卡片列表：
┌──────────────┐
│   早筛       │
│   ○ - 4 篇  │
│   ○ - 2 关  │
└──────────────┘

• 卡片宽：140px
• 高：140px
• 圆角：12px
• 当前阶段：边框 3px #2ECC71
• 完成阶段：背景 #F5F7FA
• 未开启：背景 #EEEEEE，文字灰
• 间距：12px
```

#### 快捷导航
```
水平滚动，每个导航项：
┌──────────┐
│  图标    │  32px × 32px
│  文章    │
└──────────┘

• 宽度：自适应（4 个为一屏，间距 8px）
• 高度：80px
• 文字：14px bold，#333333
• 底部分割线
```

#### 推荐内容区
```
卡片列表（ArticleCard）：
• 每个卡片 100% 宽度
• 高度：100px
• 左 16px 右 16px 内边距
• 上下 12px 间距
• 图片 80px × 80px，左侧
• 标题/摘要/作者 信息在右侧

信源标签：右上角，A/B/C
```

#### 底部导航栏
```
5 个导航项均匀分布：
[首页] [AI] [知识] [科普] [我的]

• 高：56px（含顶部分割线）
• 图标：24px × 24px
• 文字：12px
• 活跃色：#2ECC71
• 非活跃色：#999999
• 上分割线：1px #E8EAED
```

### 7.2 AI 科普助手页面（Chat）

#### 布局
```
┌─────────────────────────────┐
│  顶部导航：「AI 科普助手」   │  高 56px
├─────────────────────────────┤
│                             │
│  对话消息列表（可滚动）      │  高度自适应
│  ├─ AI 消息（左侧，绿色）  │
│  ├─ 免责声明（小字）       │
│  ├─ 用户消息（右侧，灰色）  │
│  └─ ...                    │
│                             │
├─────────────────────────────┤
│  [配额显示]                 │
│  今日免费：6/10  |  累积：47 │
│  提示文字                   │
├─────────────────────────────┤
│  输入框区                   │
│  [输入框______] [发送]     │
│                             │
└─────────────────────────────┘
```

#### 消息样式

**AI 消息（左对齐）**
```
背景：#F5F7FA
圆角：12px
内边距：12px
最大宽度：85%
文字：14px，#333333
字体：苹方 Regular

信源标签：顶部左侧，A/B/C
分享按钮：右下角，「分享」text button
免责声明：下方，12px 灰色，「本内容仅供参考...」
```

**用户消息（右对齐）**
```
背景：#2ECC71
圆角：12px
内边距：12px
最大宽度：85%
文字：14px，白色
字体：苹方 Regular
```

#### 配额显示（关键新增）
```
┌─────────────────────────────────────┐
│  📊 我的 AI 配额                     │
├─────────────────────────────────────┤
│                                     │
│  🎁 今日免费           ██████░░░  6/10 │
│     (今晚 24:00 清零)               │
│                                     │
│  🏆 累积奖励            ████████ 47   │
│     (永久有效，永不过期 ✨)         │
│                                     │
├─────────────────────────────────────┤
│  💰 总计可用：53 次                 │
├─────────────────────────────────────┤
│                                     │
│  如何获得更多奖励配额？             │
│  ✓ 完成轻松关卡 → +10 (今日还可 2 次) │
│  ✓ 完成挑战关卡 → +20 (今日还可 2 次) │
│  ✓ 分享文章      → +10 (今日还可 2 次) │
│                                     │
└─────────────────────────────────────┘

• 背景：#F5F7FA，圆角 12px，内边距 16px
• 进度条高：6px，背景 #E8EAED，填充 #2ECC71
• 今日免费颜色：#F39C12（金色警告）
• 累积奖励颜色：#27AE60（深绿）
• 总计文字：Bold 16px，#2ECC71
```

#### 输入框区（底部固定）
```
高：60px（含 12px 上边距）
背景：#FFFFFF
左右内边距：16px
上内边距：12px

输入框 + 发送按钮布局：
[输入框......] [发送]
• 输入框：flex-1，高 40px，圆角 8px
• 发送按钮：宽 40px，高 40px，图标 24px
• 间距：8px

输入框样式：
• 边框：1px #E8EAED
• Placeholder：「请输入您的问题...」
• Focus 态：边框 2px #2ECC71
```

### 7.3 知识闯关页面（Games）

#### 关卡列表
```
┌─────────────────────────────┐
│  顶部导航：「知识闯关」      │  高 56px
├─────────────────────────────┤
│  学习进度                   │  高 60px
│  ████████░░░░  75% 完成    │
├─────────────────────────────┤
│  轻松难度（1-2 星）          │
│  ┌─────────────────────┐  │
│  │ 关卡 1              │  │  GameCard
│  │ ★★☆☆☆          │  │
│  │ 进度：3/5          │  │
│  └─────────────────────┘  │
│  ┌─────────────────────┐  │
│  │ 关卡 2  ✓ 已完成  │  │  已完成状态
│  │ ★★☆☆☆          │  │
│  │ 📊 +10 AI 配额    │  │
│  └─────────────────────┘  │
│                             │
│  挑战难度（3-5 星）          │
│  ┌─────────────────────┐  │
│  │ 关卡 10  ⏳ 冷却中 │  │  冷却状态
│  │ ★★★★☆          │  │
│  │ 2h 后可重试       │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────┘
```

#### GameCard 详细设计
```
┌──────────────────────────────────┐
│ 关卡 5  星级显示  [✓已完成|⏳冷却] │← 顶部，右对齐
├──────────────────────────────────┤
│                                  │
│ 风险信号识别：症状判断            │← 标题 16px bold
│                                  │
│ ★★★☆☆ (难度 3)                 │← 星级 + 难度
│                                  │
│ 进度: ▓▓▓░░░░░░ 3/5            │← 进度条 8px 高
│                                  │
│ [试一试] [查看答案解析]          │← 2 按钮，各占 45%
│                                  │
└──────────────────────────────────┘

已完成态：
• 背景：#F5F7FA
• 底部显示：📊 +10 AI 配额（绿色 #2ECC71）

冷却态：
• 背景：#EEEEEE
• 进度条：灰色 #BDBDBD
• 文字：#999999
• 底部显示：⏳ 2h 3m 后可重试（橙色 #F39C12）
```

#### 答题页面
```
┌─────────────────────────────┐
│ 返回  「答题」               │ 进度 3/5
├─────────────────────────────┤
│                             │
│ [信源标签 A]                │← 左上角
│                             │
│ 题目：XX 症状出现时...      │
│ （最多 2 行，16px bold）    │
│                             │
│ A. [ ] 答案 A              │← 单选框 + 文字
│ B. [ ] 答案 B              │
│ C. [ ] 答案 C              │
│ D. [ ] 答案 D              │
│                             │
│ [提交答案]                  │← Primary Button
│                             │
└─────────────────────────────┘

失败后弹窗：
「很遗憾，答案不对！」
「正确答案是：B」
「解析：...」（12px，#666666）
「还有 1 次机会」或「请等待 6h 后重试」
```

### 7.4 科普文章页面（Articles）

#### 文章列表
```
┌─────────────────────────────┐
│  顶部导航：「科普资源」      │
├─────────────────────────────┤
│  Roadmap 快速选择            │
│  [早筛] [确诊] [治疗] [康复]  │← 水平滑动
├─────────────────────────────┤
│  文章列表                   │
│  ┌─────────────────────┐  │
│  │ [A] 肺癌诊疗规范... │  │
│  │ 科普 • 2025-12-25   │  │
│  └─────────────────────┘  │ ArticleCard
│  ┌─────────────────────┐  │
│  │ [B] 治疗副作用...   │  │
│  │ 医学 • 2025-12-20   │  │
│  └─────────────────────┘  │
│                             │
│  [加载更多]                 │
│                             │
└─────────────────────────────┘
```

#### 文章详情页
```
┌─────────────────────────────┐
│ 返回  「文章」               │ 📌 💬
├─────────────────────────────┤
│                             │
│ [A] 肺癌诊疗规范...         │← 信源标签
│                             │
│ 标题：肺癌早期症状识别...  │← 28px bold
│                             │
│ 来源：NCCN 2024 指南        │← 12px 灰色
│ 发布：2025-12-25           │
│ 阅读：4.2k 次 | 分享：234 次│
│                             │
├─────────────────────────────┤
│  正文内容                   │
│  （排版遵循字体规范）        │
│                             │
│  [图片 1]                   │
│                             │
│  更多文字内容...            │
│                             │
├─────────────────────────────┤
│ [💬 分享] [📌 收藏]         │← 底部固定
└─────────────────────────────┘

• 标题：28px bold，#333333，行高 36px
• 正文：14px，#333333，行高 24px
• 引用块：左边框 4px #2ECC71，背景 #F5F7FA，内边距 16px
• 列表项：左内边距 24px，列表符号 #2ECC71
• 图片：100% 宽度，圆角 8px，顶底外边距 16px
• 底部分享按钮：100% 宽度，高 48px，Primary Button
```

### 7.5 社区讨论页面（Community / BBS）

#### BBS 列表（新增）
```
┌─────────────────────────────┐
│  顶部导航：「社区讨论」      │
├─────────────────────────────┤
│  [推荐] [最新] [热门] [我的]  │← 分类标签
├─────────────────────────────┤
│  帖子列表                   │
│  ┌─────────────────────┐  │
│  │👤 李女士    12分钟前 │  │
│  │ 关于化疗副作用的经验分享│
│  │ 化疗过程中出现口腔溃疡...│
│  │                     │  │
│  │ 💬 12    ❤️ 45      │  │
│  │ [赞] [回复] [分享] [举报]│
│  └─────────────────────┘  │
│  ┌─────────────────────┐  │
│  │👤 王先生    1小时前  │  │
│  │ ✅ 已通过审核        │  │
│  │ 营养建议汇总...      │  │
│  │ 💬 34    ❤️ 128     │  │
│  │ [赞] [回复] [分享] [举报]│
│  └─────────────────────┘  │
│                             │
│  [加载更多]                 │
│                             │
├─────────────────────────────┤
│ [+发布新帖]                 │← 浮动按钮
└─────────────────────────────┘
```

#### BBS 帖子卡片详细设计
```
┌──────────────────────────────────────┐
│ 👤 用户昵称              发布时间 1h  │← 头部
│    身份标签：患者        等级 Level 3 │
├──────────────────────────────────────┤
│                                      │
│ [审核标记] 帖子标题（讨论话题）      │← 16px bold
│                                      │
│ 帖子内容预览（最多 3 行，超出...）   │
│ 会用省略号表示，建议用户查看原文。   │
│                                      │
│ [配图 1] [配图 2]                   │← 最多 4 张，2×2 布局
│                                      │
├──────────────────────────────────────┤
│ 💬 12  ❤️ 45  👁️ 128  📤 5         │← 统计信息
├──────────────────────────────────────┤
│ [赞] [回复] [分享] [举报]            │← 行动按钮
└──────────────────────────────────────┘

审核标记样式：
• 已发布：绿色背景 #E8F5E9，文字 #1B5E20
  标签：「✓ 已通过审核」
  
• 待审核：黄色背景 #FFF3E0，文字 #E65100
  标签：「⏳ 待审核（通常 4h 内）」
  
• 已拒绝：红色背景 #FFEBEE，文字 #C62828
  标签：「✗ 已拒绝」
  
• 个人发布（本人）：绿色文字
  标签：「👤 我的帖子」

用户身份标签：
• 患者：蓝色 #2196F3
• 家属：橙色 #FF9800
• 医生：绿色 #4CAF50（如有）

等级样式：
• Level 1-3：灰色 #999999
• Level 4-7：绿色 #2ECC71
• Level 8-10：金色 #FFC107（VIP）
```

#### 发布帖子页面
```
┌─────────────────────────────┐
│ 返回  「发布讨论」          │
├─────────────────────────────┤
│                             │
│ 标题                        │
│ [输入框：最少 10 字...]     │
│ 已输入 24/100 字             │← 字数统计
│                             │
│ 内容                        │
│ [文本框：最少 20 字...]     │
│ 已输入 156/2000 字           │
│                             │
│ [+ 上传图片] (最多 4 张)    │
│                             │
│ 选择标签（可选，最多 3 个） │
│ [心理支持] [生活经验] [  ]  │← Tag 选择
│                             │
│ ☑️ 我同意社区讨论规范       │← Checkbox
│                             │
│ [发布] [草稿]               │
│                             │
└─────────────────────────────┘

规则提示（顶部可折叠）：
⚠️ 社区讨论规范：
• 允许话题：就诊流程、心理支持、生活经验、勋章展示
• 禁聊：剂量、处方、诊断
• 发布内容遵守《社区规范》
• 违规内容将被拒绝，多次违规将禁言
```

#### 帖子详情 & 评论页面
```
┌─────────────────────────────┐
│ 返回  「评论」               │ 👁️ 128
├─────────────────────────────┤
│ 👤 李女士 12 分钟前          │
│ 患者，等级 Level 5          │
│ ✓ 已通过审核                │
│                             │
│ 化疗过程中的口腔溃疡管理     │← 帖子标题
│                             │
│ 我在化疗第三周出现了...     │← 帖子内容（完整）
│                             │
│ [图片 1]                    │
│                             │
│ 更多内容...                 │
│                             │
│ 更新于：2025-12-24 15:30    │
├─────────────────────────────┤
│ 📌 收藏  ❤️ 45 赞  📤 5 分享 │
├─────────────────────────────┤
│ 💬 12 条评论                 │
│                             │
│ ┌───────────────────────┐  │
│ │👤 张医生 4 小时前      │  │
│ │ 医学建议发布者        │
│ │                       │  │
│ │ 这个护理方法很科学... │  │
│ │                       │  │
│ │ ❤️ 8   💬 回复        │  │
│ └───────────────────────┘  │
│                             │
│ ┌───────────────────────┐  │
│ │👤 王女士 1 小时前     │  │
│ │ 患者                 │  │
│ │                       │  │
│ │ +1，我也遇到过       │  │
│ │ 使用了医生推荐的...  │  │
│ │                       │  │
│ │ ❤️ 3   💬 回复        │  │
│ └───────────────────────┘  │
│                             │
│ [更多评论]                  │
│                             │
├─────────────────────────────┤
│ [☺️ 表情] [📸 图片]          │
│ [评论输入框...] [发送]      │← 底部固定
│ 11 字/140 字（可删除无效字） │
│                             │
└─────────────────────────────┘

评论框样式：
• 背景：#FFFFFF（底部固定，高 60px）
• 输入框：高 40px，圆角 8px
• 表情/图片按钮：24px × 24px，灰色

嵌套回复：
• 二级评论缩进 16px
• 背景：#F5F7FA，圆角 8px，内边距 12px
• 最多支持 2 级展开，超出显示 [展开更多回复]
```

### 7.6 用户个人中心页面（User Profile）

#### 个人中心
```
┌─────────────────────────────┐
│  顶部导航：「我的」          │
├─────────────────────────────┤
│  用户信息区                 │
│  ┌─────────────────────┐  │
│  │ 👤 [头像]           │  │
│  │ 李女士              │  │
│  │ 肺癌患者 | Level 5  │  │
│  │ 学习进度：75%       │  │
│  │ [编辑资料]          │  │
│  └─────────────────────┘  │
├─────────────────────────────┤
│  统计信息                   │
│  ┌────┬────┬────┐         │
│  │阅读 │完成 │分享 │        │
│  │ 24 │  5 │ 12 │         │
│  │篇  │个  │次  │         │
│  └────┴────┴────┘         │
├─────────────────────────────┤
│  我的勋章                   │
│  🏅 📚 🎯 ⭐ ✨            │← 5 个勋章展示
│  [查看更多勋章]             │
├─────────────────────────────┤
│  功能菜单                   │
│  ┌─────────────────────┐  │
│  │ 📌 我的收藏           │
│  │ 💬 我的评论           │  ListItem
│  │ 📝 我的发布           │
│  │ 💾 离线资源           │
│  │ ⚙️ 设置               │
│  │ 📋 服务条款           │
│  │ 🔒 隐私政策           │
│  └─────────────────────┘  │
├─────────────────────────────┤
│ [退出登录]                  │← 底部 Text Button
│                             │
└─────────────────────────────┘
```

#### 用户信息卡片
```
┌──────────────────────────────────┐
│ 👤 [128px × 128px 头像]          │← 正圆形，圆角 50%
│                                  │
│ 李女士                           │← 16px bold
│ 肺癌患者 | Level 5               │← 13px 灰色
│                                  │
│ 📚 学习进度                      │← 标签
│ ████████░░░░░░░░ 75%            │← 进度条
│                                  │
│ [编辑资料] [分享]                │← 2 按钮
│                                  │
└──────────────────────────────────┘

• 背景：渐变 #2ECC71 → #A8E6C1
• 内边距：24px
• 圆角：16px
• 头像：128px × 128px，圆角 50%
• 编辑资料：Secondary Button
• 分享：Primary Button
```

#### 我的收藏
```
├─────────────────────────────┐
│ 📌 我的收藏（12 篇）         │
├─────────────────────────────┤
│ ┌─────────────────────┐    │
│ │ [A] 肺癌诊疗规范... │ ✕  │
│ │ 科普 • 2025-12-20   │    │
│ └─────────────────────┘    │ ArticleCard
│ ┌─────────────────────┐    │（带删除×）
│ │ [B] 治疗副作用...   │ ✕  │
│ └─────────────────────┘    │
│                             │
│ [加载更多]                  │
└─────────────────────────────┘
```

---

## 8. 设计系统变量定义（Figma/SCSS）

### 8.1 CSS 变量

```css
:root {
  /* 色彩 */
  --primary: #2ECC71;
  --primary-dark: #27AE60;
  --primary-light: #A8E6C1;
  --success: #2ECC71;
  --warning: #F39C12;
  --error: #E74C3C;
  --info: #3498DB;
  
  /* 中性色 */
  --white: #FFFFFF;
  --gray-50: #F5F7FA;
  --gray-100: #EEEEEE;
  --gray-200: #D0D0D0;
  --gray-300: #E8EAED;
  --gray-400: #BDBDBD;
  --gray-500: #999999;
  --gray-600: #666666;
  --gray-700: #333333;
  
  /* 字体 */
  --font-family: "PingFang SC", "Microsoft YaHei", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-size-h1: 28px;
  --font-size-h2: 24px;
  --font-size-h3: 20px;
  --font-size-h4: 18px;
  --font-size-h5: 16px;
  --font-size-body-l: 16px;
  --font-size-body-m: 14px;
  --font-size-body-s: 13px;
  --font-size-caption: 12px;
  --font-size-label: 12px;
  
  /* 行高 */
  --line-height-h1: 36px;
  --line-height-h2: 32px;
  --line-height-h3: 28px;
  --line-height-body-l: 24px;
  --line-height-body-m: 22px;
  --line-height-caption: 18px;
  
  /* 间距 */
  --spacing-xs: 8px;
  --spacing-sm: 16px;
  --spacing-md: 24px;
  --spacing-lg: 32px;
  --spacing-xl: 48px;
  
  /* 圆角 */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-circle: 50%;
  
  /* 阴影 */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.15);
  --shadow-xl: 0 8px 24px rgba(0, 0, 0, 0.18);
}
```

### 8.2 SCSS Mixins（示例）

```scss
// 文本截断
@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// 主按钮
@mixin btn-primary {
  background-color: var(--primary);
  color: var(--white);
  border-radius: var(--radius-md);
  border: none;
  cursor: pointer;
  transition: background-color 0.3s ease;
  
  &:hover {
    background-color: var(--primary-dark);
  }
  
  &:active {
    background-color: #1E8449;
  }
  
  &:disabled {
    background-color: var(--gray-400);
    cursor: not-allowed;
  }
}

// 卡片
@mixin card {
  background-color: var(--white);
  border: 1px solid var(--gray-300);
  border-radius: var(--radius-lg);
  padding: var(--spacing-sm);
  box-shadow: var(--shadow-sm);
}
```

---

## 9. 无障碍设计规范（Accessibility）

### 9.1 颜色对比度
- 所有文本与背景对比度 ≥ 4.5:1（WCAG AA 标准）
- 大文本（≥18px）对比度 ≥ 3:1

### 9.2 字体大小
- 最小字体：12px（仅用于标签/辅助文字）
- 可点击元素最小高度：48px × 48px

### 9.3 键盘导航
- 所有交互元素可通过 Tab 键访问
- 焦点指示器清晰可见（默认焦点环或自定义 focus 态）

### 9.4 屏幕阅读器支持
- 所有按钮/链接添加 ARIA label
- 图片添加 alt 属性
- 表单输入关联 label
- 动态内容使用 aria-live

### 9.5 文本朗读
- 文章支持「语音朗读」功能
- 阅读速度可调节（0.75x - 2.0x）
- 朗读时高亮当前行

---

## 10. 暗色模式（Dark Mode）

### 10.1 深色色彩方案
```
深色背景：#1A1A1A （代替 #FFFFFF）
深色卡片：#2D2D2D （代替 #F5F7FA）
深色文字：#E8E8E8 （代替 #333333）
深色边框：#404040 （代替 #E8EAED）

原色不变：#2ECC71 保持一致
```

### 10.2 实现方式
```css
@media (prefers-color-scheme: dark) {
  :root {
    --white: #1A1A1A;
    --gray-50: #2D2D2D;
    --gray-700: #E8E8E8;
    /* 其他适配 */
  }
}
```

---

## 11. 动画与过渡规范

### 11.1 过渡时间
```
快速过渡：150ms（悬停、焦点）
标准过渡：300ms（页面切换、模态）
缓慢过渡：500ms（加载完成、成功提示）
```

### 11.2 缓动函数
```
ease-out: cubic-bezier(0.4, 0, 0.2, 1) - 推荐用于进入动画
ease-in: cubic-bezier(0.4, 0, 1, 1) - 推荐用于退出动画
ease-in-out: cubic-bezier(0.4, 0, 0.2, 1) - 推荐用于往返
```

### 11.3 常见动画
```
• 按钮按下：缩放 95% + 150ms
• 页面转换：淡入 300ms
• 配额更新：闪烁 + 绿色高亮 500ms
• 加载动画：360° 旋转，无限循环
• 成功提示：从上往下滑入 300ms + 2s 停留
```

---

## 12. 响应式设计细节

### 12.1 小屏幕适配（<375px）
- 字体大小整体缩小 10%
- 间距缩小 20%（如 16px → 12px）
- 按钮宽度撑满屏幕，留 8px 边距

### 12.2 大屏幕适配（≥768px，平板）
- 布局改为 2 列或 3 列
- 导航栏改为侧边栏
- 卡片宽度限制在 400px

### 12.3 安全区适配（刘海屏）
```css
padding-top: max(16px, env(safe-area-inset-top));
padding-left: max(16px, env(safe-area-inset-left));
padding-right: max(16px, env(safe-area-inset-right));
padding-bottom: max(16px, env(safe-area-inset-bottom));
```

---

## 13. 打印样式

### 13.1 可打印内容
- 文章页面支持打印，隐藏：导航栏、评论、按钮
- 打印时删除颜色，改用黑白 + 灰度
- 添加页码和打印时间戳

### 13.2 打印 CSS
```css
@media print {
  nav, footer, button, .interactive { display: none; }
  body { color: #000; background: #fff; }
  img { page-break-inside: avoid; }
  h1, h2 { page-break-after: avoid; }
}
```

---

## 14. 性能指标与最佳实践

### 14.1 图片优化
- 使用 WebP 格式，降级到 JPG/PNG
- 图片压缩至 ≤200KB（单张）
- 头像：32px - 128px，使用正方形
- 文章配图：最宽 375px，懒加载

### 14.2 字体优化
- 仅加载必要字重（Regular 400、Bold 700）
- 使用系统字体栈，减少 Web Font 加载
- 字体文件大小 ≤500KB

### 14.3 页面性能
- LCP（最大内容绘制）≤ 2.5s
- FID（首次输入延迟）≤ 100ms
- CLS（累积布局偏移）≤ 0.1

---

## 15. 开发交付清单

### 15.1 前端开发
- [ ] 色彩系统 CSS 变量定义
- [ ] 字体配置 & Fallback 链
- [ ] 基础组件库（Button、Input、Card 等）
- [ ] 页面布局框架（导航栏、底部栏）
- [ ] 信源等级标签组件
- [ ] 配额显示组件
- [ ] BBS 相关组件（帖子卡片、评论框）
- [ ] 响应式媒体查询
- [ ] 无障碍属性补充（ARIA）
- [ ] 暗色模式适配
- [ ] 动画库（Transitions）
- [ ] 性能优化（图片懒加载、代码分割）

### 15.2 设计资源导出
- [ ] Figma 组件库（可导入项目）
- [ ] 色彩板 & 调色板 PNG
- [ ] Logo（多格式：PNG、SVG、ICO）
- [ ] 图标库（SVG 或 iconfont）
- [ ] 字体文件（如使用 Web Font）
- [ ] 样式指南 PDF（用于传播、审批）

### 15.3 文档
- [ ] 本设计系统文档最终版
- [ ] 组件使用手册
- [ ] 开发变量映射表（CSS 变量）
- [ ] 常见问题 & 设计决策记录

---

## 16. 版本迭代计划

### 16.1 v1.0（当前）
- 核心色彩、字体、间距规范
- 主要组件库定义
- BBS 功能设计
- 信源等级视觉规范
- 配额系统 UI 规范

### 16.2 v1.1（计划中）
- 添加深色模式完整方案
- 扩展图标库
- 国际化适配规范
- 微交互动画库

### 16.3 v2.0（后续）
- Web 版本设计规范
- 管理后台 UI 规范
- 数据可视化规范
- 动画库完整版

---

## 17. 设计决策记录（ADR）

### ADR-001: 为什么选择 #2ECC71 作为主色？
- **决策**：选用绿色作为品牌主色
- **原因**：
  - 医疗/健康行业常用色（代表生命、希望、医疗）
  - 与吉祥物「小绿芽」相呼应
  - 对比度高，无障碍友好（对比度 4.8:1）
  - 国际化友好，跨文化认可度高
- **权衡**：蓝色备选（专业感更强，但与医疗平台常见色重复）
- **验证**：通过 WCAG 无障碍标准，医学顾问委员会认可

### ADR-002: 为什么采用 8px 网格系统？
- **决策**：基础间距单位为 8px
- **原因**：
  - 业界标准（Google Material Design、Apple HIG）
  - 易于换算（8px 的倍数便于跨设备适配）
  - 容易从 Figma 导出到代码
- **应用**：所有间距、字体大小、圆角都遵循 8px 倍数

### ADR-003: 为什么 BBS 功能采用「先审后发」？
- **决策**：社区发帖内容需要医学审核员审核后方可发布
- **原因**：
  - 医学合规性要求（防止错误医学信息传播）
  - 保护用户隐私和安全
  - 符合国内社交平台监管要求
- **权衡**：降低发布即时性，但确保内容质量和安全
- **UX 设计**：显示审核状态标签，设定 4h SLA 承诺

---

## 18. 常见问题（FAQ）

**Q: 如何在小程序中使用这些设计规范？**
A: 前端开发需在项目中：
1. 复制所有 CSS 变量到 `:root`
2. 创建 SCSS mixin 文件，导入项目
3. 使用 `var()` 替代硬编码的颜色/尺寸

**Q: 深色模式何时上线？**
A: v1.1 版本计划支持，用户可在设置中选择。系统默认跟随手机系统偏好。

**Q: 如何验证设计是否符合规范？**
A: 
1. 色彩对比度检查：使用 WebAIM Contrast Checker
2. 无障碍检查：使用 WAVE 或 axe DevTools
3. 响应式检查：在不同设备上预览
4. 性能检查：使用 Lighthouse

**Q: BBS 帖子中如何处理医学术语？**
A: 所有医学术语自动链接到知识库解释，用户可点击查看定义。社区编辑会在帖子中添加术语标注。

---

## 19. 相关资源

- **Figma 设计稿**：[链接待补充]
- **UI Kit 下载**：[链接待补充]
- **开发组件库**：[@pancrepal/ui](https://npm.pkg.github.com)
- **设计变量同步工具**：Tokens Studio for Figma

---

## 20. 文档维护与更新

| 维护人 | 职责 | 更新频率 |
|--------|------|--------|
| 设计负责人 | 色彩、排版、组件 | 按需更新 |
| 前端 TL | CSS 变量、代码规范 | 按需更新 |
| 产品负责人 | 功能设计、BBS 规范 | 按需更新 |
| 文档维护 | 整体文档整理、版本控制 | 月度审查 |

**最后更新**：2025-12-25  
**版本**：v1.0  
**所有者**：Pancrepal 设计团队  
**下次审核**：2026-01-15

---

**文档结束**

