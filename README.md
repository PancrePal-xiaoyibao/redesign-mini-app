# 病情主动管理科普助手 - 完整项目文档

*肿瘤患者全病程科普与自我管理公益平台*

---

## 📚 文档导航

### 1️⃣ 产品需求文档 (PRD)

| 文件 | 版本 | 重点内容 |
|------|------|--------|
| **design_prd_v2_enhanced.md** | v2.0 | ✅ 当前主文档，包含完整的功能、数据模型、API 设计、部署规范 |
| design_prd.md | v1.0 | 原始 PRD，用于参考历史决策 |

**PRD v2.0 核心模块**：
- 📍 Roadmap 指引导航
- 🎮 游戏化学习（知识闯关）
- 📖 科普文章库
- 🤖 AI 科普助手 + 配额系统
- 🔗 实用工具跳转
- 💬 **社区交流 (BBS 轻社交)** ⭐ NEW
- 📚 新手手册
- 🗄️ 完整数据模型（8 个核心表 + 7 个社区表）
- 🔐 合规与安全
- 📊 成本预算与版本节奏

---

### 2️⃣ 设计系统 & UI 规范

**DESIGN_SYSTEM_AND_UI_SPEC_V1.0.md** (48 KB)

完整的设计语言和实现规范，包括：

| 章节 | 内容 | 适用对象 |
|------|------|--------|
| **品牌规范** (2-3) | Logo、色彩体系、信源等级配色 | 设计师、品牌方 |
| **字体排版** (4) | 字体选择、大小标度、无障碍对比度 | 前端开发、设计师 |
| **间距布局** (5) | 8px 网格、响应式断点、安全区 | 前端开发 |
| **UI 组件库** (6) | Button、Input、Card、Tag、Modal、List 等详细规格 | 前端开发、组件库维护 |
| **页面设计** (7) | 8 个完整页面的布局与交互设计 | UI/UX 设计师 |
| **社区页面** (7.5) | BBS 列表、帖子卡片、评论、发布表单设计 | **社区功能开发** ⭐ |
| **开发资源** (8-11) | CSS 变量、SCSS Mixin、无障碍、暗色模式、动画 | 前端开发 |

---

### 3️⃣ BBS 社区功能专项

**BBS_UPDATE_SUMMARY.md** (5.1 KB)

社区模块的快速参考：
- ✅ 10 大功能模块详解
- 📊 7 张新表数据模型
- 🎨 UI 设计规范指引
- 🚀 开发优先级建议
- ⚠️ 监管合规检查清单

---

### 4️⃣ 其他参考文档

| 文件 | 说明 |
|------|------|
| **QUOTA_SYSTEM_SUMMARY.md** | AI 配额系统详细设计（永久配额、日配额、赚取机制） |
| **cancer_care_miniapp_design.md** | 早期版本的功能设计，用于对比和决策回溯 |
| **social-function.png** | 社区功能 UI 原型截图参考 |
| **ChatGPT Image...png** | UI 整体设计稿（首页、AI、知识、科普、用户中心） |

---

## 🎯 快速开始指南

### 产品经理
1. 阅读 **design_prd_v2_enhanced.md** 第 1-4 章（项目概述、架构、功能模块）
2. 检查 **BBS_UPDATE_SUMMARY.md** 了解社区功能
3. 参考设计稿和原型图确认交互

### UI/UX 设计师
1. 阅读 **DESIGN_SYSTEM_AND_UI_SPEC_V1.0.md** 第 1-6 章（品牌、字体、间距、组件）
2. 重点关注 **7.1-7.6** 页面设计规范
3. **7.5 社区设计** 是新增重点
4. 导出所有 CSS 变量到 Figma，同步到设计稿

### 前端开发（uni-app）
1. 学习 **DESIGN_SYSTEM_AND_UI_SPEC_V1.0.md** 第 8-11 章（开发资源）
2. 复制 CSS 变量和 SCSS Mixin 到项目
3. 参考 **design_prd_v2_enhanced.md** 第 5 章数据模型
4. 检查 API 设计（第 7 章）
5. 优先级：首页 → AI 聊天 → 文章 → 游戏 → **社区**

### 后端开发（Node.js）
1. 复制所有表结构从 **design_prd_v2_enhanced.md** 第 5 章
2. 实现核心 API（认证、内容、配额、**社区 CRUD**）
3. 集成 FastGPT/Dify AI 服务
4. 实现社区关键词检测和审核工作流
5. 配置缓存和数据库索引

### DevOps/运维
1. 参考 **design_prd_v2_enhanced.md** 第 11-12 章（部署、CI/CD）
2. 检查成本预算（第 15 章）
3. 准备监控告警配置
4. 制定备份和恢复策略

---

## 📊 关键数据点

### 用户配额系统
```
基础配额：每日 10 次（0 点重置）
赚取配额（永不过期、无限累积）：
  • 完成 easy 关卡：+10（最多 +30/日）
  • 完成 hard 关卡：+20（最多 +40/日）
  • 分享文章：+10（最多 +30/日）
  • 分享社区帖子：+5（最多 +10/日）
理论日最多可赚：100 次

配额显示：
  • 今日免费：X/10（仅今天，0 点清零）
  • 累积奖励：Y 次（永久有效）
  • 总计：X+Y 次
```

### 社区等级系统
```
Level 1-3：新手（灰色）- 先审后发，5 帖/日
Level 4-7：活跃（绿色）- 先发后审，10 帖/日
Level 8-10：VIP（金色）- 不审，无限发

升级条件：获赞 100+ 或评论 50+ 或连续 7 天无违规
降级触发：违规、被举报
```

### 信源等级视觉标识
```
A 级（权威指南）：绿色 #E8F5E9 背景，#1B5E20 文字
B 级（专家署名）：橙色 #FFF3E0 背景，#E65100 文字
C 级（平台自产）：蓝色 #E3F2FD 背景，#01579B 文字
```

---

## 🔄 文档版本管理

| 版本 | 日期 | 变更 | 状态 |
|------|------|------|------|
| PRD v2.0 | 2025-12-25 | 新增 BBS 社区模块、完整数据模型、配额系统 | ✅ 最新 |
| Design System v1.0 | 2025-12-25 | 初版，包含 8 页设计规范、UI 组件库 | ✅ 最新 |
| BBS Summary | 2025-12-25 | 社区功能快速参考 | ✅ 最新 |
| PRD v1.0 | 2025-12-22 | 原始 PRD（仅供参考） | 📋 存档 |

**下次审核**：2026-01-15

---

## ✅ 交付清单

### 文档部分
- [x] PRD v2.0 完整版（包含 BBS）
- [x] 设计系统 & UI 规范 v1.0
- [x] BBS 社区功能专项文档
- [x] 配额系统详细说明
- [x] 数据模型 ERD（SQL 代码）
- [x] API 设计规范
- [x] 部署和运维指南

### 设计部分
- [x] UI 原型截图
- [x] 社区功能 UI 原型
- [x] 完整设计规范（色彩、字体、间距、组件）
- [x] Figma 组件库规范（待导出）

### 代码部分
- [ ] 前端项目框架（待开发）
- [ ] 后端 API 实现（待开发）
- [ ] 数据库初始化脚本（待开发）
- [ ] 部署配置（Docker、CI/CD）（待开发）

---

## 🛠️ 常见问题

**Q: 应该先读什么文档？**  
A: 产品经理读 PRD 第 1-4 章，设计师读 Design System，开发者先读各自部分的总结。

**Q: BBS 功能何时实现？**  
A: PRD v2.0 已完成设计，可作为 Phase 2 或独立项目开发。建议在 Phase 1 完成后立即启动。

**Q: 社区审核员如何招募？**  
A: 医学顾问委员会负责审核员认证，需要专业资质验证。运营团队维护审核员名单。

**Q: 如何处理危机干预？**  
A: 系统自动检测危机关键词，触发弹窗，用户可点击「心理危机救助」按钮，系统同时通知版主和医学顾问。

**Q: 配额如何持久化？**  
A: 每日配额在 users 表存储，每晚 0 点触发重置；赚取配额在 ai_accumulated_quota 字段永久保存。

---

## 📞 联系方式

- **产品负责人**：[待补充]
- **设计负责人**：[待补充]
- **开发负责人**：[待补充]
- **医学顾问委员会**：[待补充]

---

## 📄 许可证

本文档为公益项目内部文档，仅供项目团队使用。任何外部分享需获得项目负责人批准。

---

**最后更新**：2025-12-25 11:00 UTC+8  
**维护者**：Pancrepal 项目团队  
**项目状态**：🚀 准备开发阶段

